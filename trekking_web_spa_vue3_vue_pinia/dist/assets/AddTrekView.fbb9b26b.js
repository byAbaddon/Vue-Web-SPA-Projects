import{aU as T,D,p as S,u as I,b as V,x as c,f as i,g as n,i as B,j as u,w as d,e as s,y as A,z as N,k as E,C as q,B as y,t as z}from"./index.a0b5c28b.js";import{u as L}from"./treks.66b7df20.js";import{u as R}from"./updateData.0e278640.js";import{V as j}from"./VAlert.87e711d4.js";const C=async m=>{try{const t=await T(D(S,"treks"),{...m});return console.log("Document written with Success by ID: ",t.id),t.id}catch(t){return console.error("Error adding document: ",t.message),t.message}},U={class:"my-5 mx-auto",style:{"max-width":"70rem"}},F=["onSubmit"],M=y("mdi-window-close"),O=E('<div class="text-center mb-4"><h1 class="h3 mb-3 font-weight-normal">Wish for a new adventure!</h1><p>Fill up the following information!</p></div><div class="form-label-group"><input pattern="[A-Za-z\\s]{1,}\\d*" minlength="3" type="text" name="location" class="form-control" placeholder="Location" required autofocus><label for="inputTrekName">Location</label></div><div class="form-label-group"><input type="date" name="dateTime" class="date form-control" placeholder="Date" required><label for="inputTrekDate">Date</label></div><div class="form-label-group" style=""><textarea style="" minlength="6" maxlength="200" type="text" name="description" class="form-control bg-white pa-1" placeholder="Description" required></textarea><label for="inputTrekDescription">Description</label></div><div class="form-label-group"><input pattern="https?:\\/\\/.+" type="text" name="imageURL" class="form-control" placeholder="Image https://" required autofocus><label for="inputTrekImage">Image</label></div>',5),W={key:0,style:{width:"6rem"},class:"btn btn-lg btn-dark btn-block",type:"submit"},Y={key:1,class:"mx-auto"},K={__name:"AddTrekView",setup(m){const t=L(),p=I(),f=V();let a=c(!1),h=c(""),o=c("");const _=g=>{const[r,l,w,x,v]=g.target,b={location:l.value,imageURL:v.value,organizer:p.data.uid,date:w.value,description:x.value,likes:0,voters:[],owner:p.data.displayName};t.allTreks.some(e=>e.location==l.value&&e.image==v.value)?(a.value=!0,o.value="This trek, already exist!"):C(b).then(e=>{R(e,Object.assign({},{id:e},b)).then(k=>console.log("Success update and add ID")).catch(k=>console.log("Fail to update",k.error)),console.log("Success add new trek to collection",e),a.value=!0,h.value="success",o.value="Success add new trek to collection",setTimeout(()=>{o.value="You will be redirect to home page..."},1500),setTimeout(()=>{f.push("/")},3e3)}).catch(e=>{o.value=e,a.value=!0}),setTimeout(()=>{a.value=!1,document.getElementById("create-form").reset()},3e3)};return(g,r)=>(i(),n("div",U,[B("form",{id:"create-form",class:"create-trek",onSubmit:N(_,["prevent"])},[u(A,{class:"float-end",variant:"text",onClick:r[0]||(r[0]=l=>s(f).push("/"))},{default:d(()=>[u(q,{color:"red",size:"30"},{default:d(()=>[M]),_:1})]),_:1}),O,s(a)?(i(),n("div",Y,[u(j,{class:"mx-auto",type:s(h)=="success"?"success":"error"},{default:d(()=>[y(z(s(o)),1)]),_:1},8,["type"])])):(i(),n("button",W,"Make"))],40,F)]))}};export{K as default};
