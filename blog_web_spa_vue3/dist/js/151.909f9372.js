"use strict";(self["webpackChunkblog_web_spa_vue3"]=self["webpackChunkblog_web_spa_vue3"]||[]).push([[151],{184:function(t,o,e){e.d(o,{B:function(){return n}});var s=e(5728),a=e(6035);let l=[];const n=async()=>{l=[];const t=(0,a.hJ)(s.db,"posts"),o=await(0,a.PL)(t);return o.forEach((t=>{let o=Object.assign({},{id:t.id},t.data());l.push(o)})),l}},9151:function(t,o,e){e.r(o),e.d(o,{default:function(){return ut}});var s=e(3396),a=e(7139);const l=t=>((0,s.dD)("data-v-d0532c38"),t=t(),(0,s.Cn)(),t),n=l((()=>(0,s._)("section",{class:"section"},[(0,s._)("h3",null,"Posts"),(0,s._)("hr")],-1))),i={class:"posts-row"},c=["id"],d={key:0,class:"buttons"},r={key:1,class:"buttons"};function u(t,o,e,l,u,g){const h=(0,s.up)("details-dialog"),p=(0,s.up)("edit-dialog"),D=(0,s.up)("delete-dialog");return(0,s.wg)(),(0,s.iD)("main",null,[n,(0,s._)("div",i,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.allPosts,((e,l)=>((0,s.wg)(),(0,s.iD)("article",{class:"post",key:l,id:e.id},[(0,s._)("h1",null,(0,a.zw)(e.title),1),(0,s._)("h2",null,[(0,s._)("span",null,(0,a.zw)(e.category),1)]),(0,s._)("p",null,(0,a.zw)(e.content),1),t.currentUserEmail==e.creatorEmail?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("a",{onClick:o[0]||(o[0]=(...t)=>g.onBtn&&g.onBtn(...t)),class:"details-button"},"Details"),(0,s._)("a",{onClick:o[1]||(o[1]=(...t)=>g.onBtn&&g.onBtn(...t)),class:"edit-button"},"Edit"),(0,s._)("a",{onClick:o[2]||(o[2]=(...t)=>g.onBtn&&g.onBtn(...t)),class:"delete-button"},"Delete")])):((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("a",{onClick:o[3]||(o[3]=(...t)=>g.onBtn&&g.onBtn(...t)),class:"details-button"},"Details"),(0,s._)("a",{onClick:o[4]||(o[4]=(...t)=>g.onBtn&&g.onBtn(...t)),class:"locked-edit"},"Locked ðŸ”’"),(0,s._)("a",{onClick:o[5]||(o[5]=(...t)=>g.onBtn&&g.onBtn(...t)),class:"locked-delete"},"Locked ðŸ”’")]))],8,c)))),128))]),(0,s.Wm)(h,{allPosts:t.allPosts},null,8,["allPosts"]),(0,s.Wm)(p,{allPosts:t.allPosts},null,8,["allPosts"]),(0,s.Wm)(D)])}var g=e(9242);const h=t=>((0,s.dD)("data-v-7cd02d26"),t=t(),(0,s.Cn)(),t),p={class:"modal"},D={class:"buttons"},m=h((()=>(0,s._)("span",null,"Title:",-1))),_=h((()=>(0,s._)("span",null,"Category:",-1))),w=h((()=>(0,s._)("span",null,"Content:",-1)));function v(t,o,e,l,n,i){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"header-modal",onOnDialog:o[1]||(o[1]=(...o)=>t.odDialog&&t.odDialog(...o))},[(0,s._)("div",p,[(0,s._)("div",D,[(0,s._)("span",{class:"close",onClick:o[0]||(o[0]=(...t)=>i.onCloseDialog&&i.onCloseDialog(...t))},"âœ–")]),(0,s._)("section",null,[(0,s._)("div",null,[m,(0,s.Uk)(" "+(0,a.zw)(t.postData.title),1)]),(0,s._)("div",null,[_,(0,s.Uk)(" "+(0,a.zw)(t.postData.category),1)]),(0,s._)("div",null,[w,(0,s.Uk)(" "+(0,a.zw)(t.postData.content),1)])])])],544)),[[g.F8,t.showDialog]])}var b=e(1461),f=e.n(b),C={props:["allPosts"],data:()=>({postData:"",showDialog:!1}),methods:{onCloseDialog(){this.showDialog=!1}},mounted(){f().on("on-details",(t=>{this.showDialog=!this.showDialog,this.postData=this.allPosts.filter((o=>o.id==t))[0]}))}},k=e(89);const y=(0,k.Z)(C,[["render",v],["__scopeId","data-v-7cd02d26"]]);var P=y;const B={class:"header-modal"},E={class:"modal"};function x(t,o,e,a,l,n){const i=(0,s.up)("edit-component");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",E,[(0,s.Wm)(i)])],512)),[[g.F8,t.showDialog]])}const S=t=>((0,s.dD)("data-v-ddbe7638"),t=t(),(0,s.Cn)(),t),z={id:"main-blog"},I={class:"first-section"},T={class:"background-container"},U=S((()=>(0,s._)("h1",null,"Edit Post",-1))),J=S((()=>(0,s._)("label",{for:"title"},"Title",-1))),Z=["value"],$=S((()=>(0,s._)("label",{for:"category"},"Category",-1))),A=["value"],F=S((()=>(0,s._)("label",{for:"content"},"Content",-1))),L=["value"],O=S((()=>(0,s._)("button",null,"Create",-1))),W=S((()=>(0,s._)("span",{id:"close-btn"},"âœ–",-1))),q=[W],R={class:"message"};function N(t,o,e,l,n,i){return(0,s.wg)(),(0,s.iD)("main",z,[(0,s._)("section",I,[(0,s._)("section",T,[(0,s._)("form",{class:"edit-form",onSubmit:o[1]||(o[1]=(0,g.iM)(((...t)=>i.createdSubmit&&i.createdSubmit(...t)),["prevent"]))},[U,J,(0,s._)("input",{type:"text",name:"title",placeholder:"Required, minlength 2",value:t.postData.title},null,8,Z),$,(0,s._)("input",{type:"text",name:"category",placeholder:"Required, minlength 2",value:t.postData.category},null,8,A),F,(0,s._)("textarea",{name:"content",cols:"30",rows:"7",placeholder:"Required, maxlength 160",value:t.postData.content}," ",8,L),O,(0,s._)("a",{onClick:o[0]||(o[0]=(...t)=>i.onBtnExit&&i.onBtnExit(...t))},q),(0,s._)("div",R,[(0,s._)("h2",null,(0,a.zw)(t.message),1)])],32)])])])}var j=e(5728),H=e(6035);const K=async(t,o)=>{const e=(0,H.JU)(j.db,"posts",t);await(0,H.r7)(e,o)};var M=K,Y={data:()=>({postData:[],message:""}),methods:{createdSubmit(t){const o=new FormData(t.target),e=o.get("title"),s=o.get("category"),a=o.get("content");console.log("Click error not fill fields"),this.message="The fields are not fill correct!",e&&s&&a&&a.length>2&&a.length<=160&&(console.log("Success edit post",e),this.message=`Success edit post - ${e}.`,M(this.postData.id,{title:e,category:s,content:a}),t.target.reset(),this.$router.push({path:"/posts/edit"}),setTimeout((()=>{this.$router.push("/posts")}),3e3)),setTimeout((()=>this.message=""),2e3)},onBtnExit(){f().emit("exit")}},mounted(){f().on("postData",(t=>this.postData=t))}};const G=(0,k.Z)(Y,[["render",N],["__scopeId","data-v-ddbe7638"]]);var Q=G,V={components:{EditComponent:Q},props:["allPosts"],data:()=>({message:"Edit post?",showDialog:!1}),mounted(){f().on("on-edit",(t=>{this.showDialog=!this.showDialog;let o=this.allPosts.filter((o=>o.id==t))[0];f().emit("postData",o)})),f().on("exit",(()=>this.showDialog=!1))}};const X=(0,k.Z)(V,[["render",x]]);var tt=X;const ot={class:"modal"},et={class:"buttons"};function st(t,o,e,l,n,i){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"header-modal",onOnDialog:o[2]||(o[2]=(...o)=>t.odDialog&&t.odDialog(...o))},[(0,s._)("div",ot,[(0,s._)("div",et,[(0,s._)("span",{class:"agree",onClick:o[0]||(o[0]=(...t)=>i.onAgreeDeletePost&&i.onAgreeDeletePost(...t))}," âœ…"),(0,s._)("span",{class:"close",onClick:o[1]||(o[1]=(...t)=>i.onCloseDialog&&i.onCloseDialog(...t))},"âœ–")]),(0,s._)("p",null,(0,a.zw)(t.message),1)])],544)),[[g.F8,t.showDialog]])}const at=async t=>{console.log(t),await(0,H.oe)((0,H.JU)(j.db,"posts",t))};var lt=at,nt=(e(184),{data:()=>({message:"Are you sure to want to delete this post?",showDialog:!1,postId:""}),methods:{onCloseDialog(){this.showDialog=!1},onAgreeDeletePost(){lt(this.postId).then((t=>{console.log("Delete Success"),this.message="Post was DELETED Success!",this.$router.push("/posts/delete"),setTimeout((()=>{this.$router.back(),this.showDialog=!this.showDialog}),3e3)})).catch((t=>console.log(t)))}},mounted(){f().on("on-delete",(t=>{this.postId=t,this.showDialog=!this.showDialog}))}});const it=(0,k.Z)(nt,[["render",st],["__scopeId","data-v-67026560"]]);var ct=it,dt={components:{DetailsDialog:P,EditDialog:tt,DeleteDialog:ct},data:()=>({allPosts:[],currentUserEmail:JSON.parse(localStorage.getItem("auth")).email}),methods:{onBtn(t){const o=t.target.textContent,e=t.currentTarget.parentNode.offsetParent.id;"Details"==o&&f().emit("on-details",e),"Edit"==o&&f().emit("on-edit",e),"Delete"==o&&f().emit("on-delete",e)}},created(){(0,H.cf)((0,H.hJ)(j.db,"posts"),(t=>t.docs.forEach((t=>this.allPosts.push(t.data())))))}};const rt=(0,k.Z)(dt,[["render",u],["__scopeId","data-v-d0532c38"]]);var ut=rt}}]);
//# sourceMappingURL=151.909f9372.js.map