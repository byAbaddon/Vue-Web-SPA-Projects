{"version":3,"file":"js/327.4521e6c2.js","mappings":"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","sources":["webpack://cooking-recipes/./src/components/DetailsRecipeComponent.vue","webpack://cooking-recipes/./src/service/deleteRecipe.js","webpack://cooking-recipes/./src/service/detailsRecipe.js","webpack://cooking-recipes/./src/service/likeRecipes.js","webpack://cooking-recipes/./src/components/DetailsRecipeComponent.vue?c2de"],"sourcesContent":["<template>\n  <div class=\"row form-layout p-5\" >\n    <div  class=\"col-md-12\">\n      <div class=\"recepieInfo\">\n        <div class=\"detailsFoodImage\">\n          <img :src=\"currentRecipe.image\" alt=\"foodImageURL\" width=\"300\" />\n        </div>\n\n        <div class=\"infoPack\">\n          <h3 class=\"my-3\">{{ currentRecipe.meal }}</h3>\n          <p class=\"prep-method\">{{ currentRecipe.preparation }}</p>\n          <p class=\"description\">{{ currentRecipe.description }}</p>\n        </div>\n\n        <div class=\"detailsIngredients\">\n          <h3 class=\"my-3 ingredient\">Ingredients</h3>\n          <ul\n            v-for=\"(ingredient, index) of currentRecipe.ingredients\n              ? currentRecipe.ingredients.split('.')\n              : null\"\n            :key=\"index\"\n          >\n            <li>{{ ingredient }}</li>\n          </ul>\n        </div>\n\n        <div class=\"actions\">\n          <div v-if=\"owner == currentRecipe.creatorId\">\n            <a class=\"btn btn-info\" @click=\"editRecipe\">Edit</a>\n            <a class=\"btn btn-danger\" @click=\"archiveRecipe\" >Delete</a>\n            <a class=\"btn btn-warning\" @click=\"btnBack\">Back</a>\n          </div>\n          <div v-else>\n            <a class=\"btn btn-success\" @click=\"btnOnLike\"\n              >Likes: {{ currentRecipe.likes }}</a>       \n            <a id=\"btnBackTwo\" class=\"btn btn-warning\" @click=\"btnBack\">Back</a>\n          </div>      \n        </div>      \n      </div>\n    </div> \n  </div>\n\n</template>\n\n<script>\n\nimport deleteRecipe  from '@/service/deleteRecipe'\nimport { loadDetails } from \"@/service/detailsRecipe\";\nimport  updateRecipeLike from '@/service/likeRecipes'\nimport router from \"@/router\";\nimport { useRoute } from \"vue-router\"\nimport { ref, onUnmounted} from \"vue\";\n\nexport default {\n\n  setup() {\n    let owner = ref(JSON.parse(localStorage.getItem('auth')).uid );\n    let recipeId = useRoute().params.id;\n    let currentRecipe = ref(\"\");\n\n    loadDetails(recipeId).then((e) => (currentRecipe.value = e));\n \n    document.querySelector('#footer').style.display = 'none'\n    onUnmounted(() => document.querySelector('#footer').style.display = 'block')\n\n   \n    const btnOnLike = () => {\n      const isAlreadyVote = currentRecipe.value.voters.filter(x => x == owner.value)\n      if (!isAlreadyVote.length) {\n        let incrementLikes = Number(currentRecipe.value.likes)\n      \n        updateRecipeLike(recipeId, { likes: ++incrementLikes}, owner.value) \n          .then(() => {\n            console.log('Success, add new like!')\n            router.push({ name: 'message', query: { 'from': 'makeLike'} })\n          })\n          .catch(e => {\n            console.log('Error', e.error)\n            router.push({ name: 'message', query: { 'from': 'makeLike' , 'error' : e } }) \n            })\n         \n       \n      } else {\n        console.log('You already making vote in this recipe!');\n         router.push({ name: 'message', query: { 'from': 'alreadyLike'} })\n      }\n    \n\n    }\n\n    const archiveRecipe = () => {\n      deleteRecipe(recipeId)\n        .then(() => {\n           console.log('Success deleted recipe')\n             router.push({ name: 'message', query: { 'from': 'archive' }})\n        }) .catch((e) => console.log(e.error))\n    } \n     \n    const editRecipe = () => {\n    router.push({\n        path: `/category/recipe/edit/${recipeId}`,\n      });\n    } \n\n    const btnBack = () => router.go(-1)\n\n\n    return { owner, currentRecipe, btnOnLike, archiveRecipe, editRecipe, btnBack};\n  },\n};\n</script>\n\n\n\n<style scoped>\n#modal{\n  display: none;\n}\n\na{\n  padding-right: 1.8em;\n  padding-left: 1.8em;\n  border-radius: 8px;\n}\na.btn:nth-child(2){\n  padding: 6px;\n  padding-right: 1em;\n  padding-left: 1em;\n}\n\n#btnBackTwo{\n  padding-right: 2.4em;\n  padding-left: 2.4em;\n }\n\n.form-layout {\n  width: 60%;\n  margin: 1em auto;\n  z-index: 0;\n}\n\n.detailsIngredients > ul {\n  margin:0;\n}\n\n.actions{\n  margin-top: 1.5em;\n}\n\nimg {\n max-width: 300px;\nfloat: inline-end;\nmargin: 1em;\nmax-height: 14em;\n}\n\nul {\n  display:flex;\n}\n\nli {\n  flex-direction: row;\n}\n\n.actions a {\n  margin-right:1em;\n}\n</style>","import { db } from '@/service/sdk'\nimport { doc, deleteDoc } from \"firebase/firestore\";\n\nconst deleteRecipe = async (id) => {\n  await deleteDoc(doc(db, \"recipes\", id))\n}\n\n\nexport default  deleteRecipe ","import { db } from '@/service/sdk'\nimport { doc, getDoc } from \"firebase/firestore\";\n\nasync function loadDetails(keyId) {\n\n  const docRef = doc(db, \"recipes\", keyId)\n  const docSnap = await getDoc(docRef)\n\n  if (docSnap.exists()) {\n    console.log(\"Document data details was load successful!\")\n    return docSnap.data()\n  } else {\n    console.log(\"No such document!\")\n  }\n\n}\n\n\nexport { loadDetails }\n","import { db } from '@/service/sdk'\nimport { doc, updateDoc, arrayUnion} from \"firebase/firestore\";\n\n\nconst updateRecipeLike = async (key, objectData, owner) => {\n  const editDone = doc(db, \"recipes\", key)\n  await updateDoc(editDone, objectData , )\n  await updateDoc(editDone, { 'voters': arrayUnion(owner) })\n}\n\n\nexport default updateRecipeLike\n\n","import { render } from \"./DetailsRecipeComponent.vue?vue&type=template&id=0b120f48&scoped=true\"\nimport script from \"./DetailsRecipeComponent.vue?vue&type=script&lang=js\"\nexport * from \"./DetailsRecipeComponent.vue?vue&type=script&lang=js\"\n\nimport \"./DetailsRecipeComponent.vue?vue&type=style&index=0&id=0b120f48&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/subtotal/CODE/NEW COURSES 11.2020/VUE SPA-Projects/cooking-recipes/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b120f48\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","src","$setup","image","alt","width","_toDisplayString","meal","preparation","description","_hoisted_11","_Fragment","_renderList","ingredients","split","ingredient","index","key","creatorId","_hoisted_13","onClick","_hoisted_14","likes","id","deleteRecipe","async","deleteDoc","doc","db","loadDetails","keyId","docRef","docSnap","getDoc","exists","console","log","data","updateRecipeLike","objectData","owner","editDone","updateDoc","arrayUnion","setup","ref","JSON","parse","localStorage","getItem","uid","recipeId","useRoute","params","currentRecipe","then","e","value","document","querySelector","style","display","onUnmounted","btnOnLike","isAlreadyVote","voters","filter","x","length","router","name","query","incrementLikes","Number","catch","error","archiveRecipe","editRecipe","path","btnBack","__exports__","render"],"sourceRoot":""}